{"ast":null,"code":"var _jsxFileName = \"C:\\\\Aptech\\\\Prj4_Mobile\\\\Phone\\\\frontend\\\\fe\\\\src\\\\pages\\\\ProductDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext, useMemo } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"../css/page/ProductDetail.css\";\nimport ProfileHeader from \"../components/page/PageHeader\";\nimport { DataContext } from \"../DataContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProductDetail() {\n  _s();\n  var _product$imageUrls, _product$imageUrls2;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    token,\n    setToken,\n    fetchCart\n  } = useContext(DataContext);\n  const [product, setProduct] = useState(null);\n  const [user, setUser] = useState(null);\n  const [reviews, setReviews] = useState([]);\n\n  // gallery\n  const [activeImage, setActiveImage] = useState(0);\n\n  // review filter\n  const [starFilter, setStarFilter] = useState(0);\n  const [hasCommentOnly, setHasCommentOnly] = useState(false);\n  const [sortType, setSortType] = useState(\"newest\");\n\n  /* ================= LOAD PRODUCT ================= */\n  useEffect(() => {\n    axios.get(`http://localhost:8080/api/products/${id}`).then(res => {\n      var _ref, _res$data$data, _res$data;\n      const p = (_ref = (_res$data$data = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data) !== null && _res$data$data !== void 0 ? _res$data$data : res === null || res === void 0 ? void 0 : res.data) !== null && _ref !== void 0 ? _ref : null;\n      if (!p || p.status !== \"ACTIVE\") {\n        alert(\"S·∫£n ph·∫©m kh√¥ng c√≤n kinh doanh!\");\n        navigate(\"/\");\n        return;\n      }\n      setProduct(p);\n      setActiveImage(0);\n    }).catch(() => navigate(\"/\"));\n  }, [id, navigate]);\n\n  /* ================= LOAD REVIEWS ================= */\n  useEffect(() => {\n    axios.get(`http://localhost:8080/api/reviews/product/${id}`).then(res => {\n      const payload = res === null || res === void 0 ? void 0 : res.data;\n      let list = [];\n      if (Array.isArray(payload)) list = payload;else if (Array.isArray(payload === null || payload === void 0 ? void 0 : payload.data)) list = payload.data;else if (Array.isArray(payload === null || payload === void 0 ? void 0 : payload.reviews)) list = payload.reviews;\n      setReviews(list);\n    }).catch(() => setReviews([]));\n  }, [id]);\n\n  /* ================= LOAD USER ================= */\n  useEffect(() => {\n    const localToken = localStorage.getItem(\"trip-token\");\n    if (!localToken) {\n      setUser(null);\n      return;\n    }\n    axios.get(\"http://localhost:8080/api/auth/user/me\", {\n      headers: {\n        Authorization: `Bearer ${localToken}`\n      }\n    }).then(res => {\n      var _ref2, _res$data$data2, _res$data2;\n      setUser((_ref2 = (_res$data$data2 = res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.data) !== null && _res$data$data2 !== void 0 ? _res$data$data2 : res === null || res === void 0 ? void 0 : res.data) !== null && _ref2 !== void 0 ? _ref2 : null);\n    }).catch(() => setUser(null));\n  }, [token]);\n\n  /* ================= CART ================= */\n  const addToCart = async () => {\n    if (!user) {\n      alert(\"B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m v√†o gi·ªè!\");\n      navigate(\"/login\");\n      return;\n    }\n    if (product.quantityInStock === 0) {\n      alert(\"S·∫£n ph·∫©m ƒë√£ h·∫øt h√†ng!\");\n      return;\n    }\n    try {\n      await axios.post(`http://localhost:8080/api/cart/add?productId=${id}&quantity=1`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (typeof fetchCart === 'function') {\n        fetchCart();\n      }\n      alert(\"ƒê√£ th√™m v√†o gi·ªè h√†ng üõí\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Kh√¥ng th·ªÉ th√™m v√†o gi·ªè h√†ng!\");\n    }\n  };\n  const buyNow = () => {\n    addToCart();\n    navigate(\"/cart\");\n  };\n\n  /* ================= RATING STATS ================= */\n  const ratingStats = useMemo(() => {\n    const total = reviews.length;\n    if (total === 0) return {\n      avg: 0,\n      total: 0,\n      bars: [0, 0, 0, 0, 0]\n    };\n    const bars = [0, 0, 0, 0, 0];\n    let sum = 0;\n    reviews.forEach(r => {\n      const rt = Number(r.rating) || 0;\n      sum += rt;\n      if (rt >= 1 && rt <= 5) bars[rt - 1]++;\n    });\n    return {\n      avg: sum / total,\n      total,\n      bars\n    };\n  }, [reviews]);\n\n  /* ================= FILTER REVIEWS ================= */\n  const filteredReviews = useMemo(() => {\n    let list = [...reviews];\n    if (starFilter > 0) list = list.filter(r => Number(r.rating) === starFilter);\n    if (hasCommentOnly) list = list.filter(r => {\n      var _r$comment;\n      return (_r$comment = r.comment) === null || _r$comment === void 0 ? void 0 : _r$comment.trim();\n    });\n    list.sort((a, b) => {\n      const aD = new Date(a.createdAt || 0);\n      const bD = new Date(b.createdAt || 0);\n      switch (sortType) {\n        case \"oldest\":\n          return aD - bD;\n        case \"highest\":\n          return b.rating - a.rating;\n        case \"lowest\":\n          return a.rating - b.rating;\n        default:\n          return bD - aD;\n      }\n    });\n    return list;\n  }, [reviews, starFilter, hasCommentOnly, sortType]);\n  const renderStars = rating => \"‚≠ê\".repeat(Math.round(rating || 0)) + \"‚òÜ\".repeat(5 - Math.round(rating || 0));\n\n  /* ================= AVATAR RENDERER (D·ª±a tr√™n NewsDetailPage) ================= */\n  const renderAvatar = (name, url, size = 44) => {\n    const firstLetter = name ? name.charAt(0).toUpperCase() : \"U\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"avatar-circle\",\n      style: {\n        width: size,\n        height: size,\n        backgroundColor: url ? 'transparent' : '#3182ce',\n        flexShrink: 0,\n        borderRadius: '50%',\n        overflow: 'hidden',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: '#fff',\n        fontWeight: 'bold'\n      },\n      children: url ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: url,\n        alt: name,\n        style: {\n          width: '100%',\n          height: '100%',\n          objectFit: 'cover'\n        },\n        onError: e => {\n          e.target.src = \"\";\n          e.target.parentElement.style.backgroundColor = \"#3182ce\";\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: firstLetter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this);\n  };\n  if (!product) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner-border text-danger\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 7\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pd-container\",\n    children: [/*#__PURE__*/_jsxDEV(ProfileHeader, {\n      user: user,\n      onLogout: () => {\n        localStorage.removeItem(\"trip-token\");\n        setToken(null);\n        setUser(null);\n        window.location.href = \"/\";\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pd-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-main-image\",\n          children: [product.quantityInStock === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pd-out-stock\",\n            children: \"H\\u1EBET H\\xC0NG\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: (_product$imageUrls = product.imageUrls) === null || _product$imageUrls === void 0 ? void 0 : _product$imageUrls[activeImage],\n            alt: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-thumb-list\",\n          children: (_product$imageUrls2 = product.imageUrls) === null || _product$imageUrls2 === void 0 ? void 0 : _product$imageUrls2.map((url, i) => /*#__PURE__*/_jsxDEV(\"img\", {\n            src: url,\n            alt: `thumb-${i}`,\n            className: i === activeImage ? \"active\" : \"\",\n            onClick: () => setActiveImage(i)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"pd-name\",\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-rating-line\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pd-rating-score\",\n            children: ratingStats.avg.toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pd-rating-stars\",\n            children: renderStars(ratingStats.avg)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pd-rating-count\",\n            children: [\"(\", ratingStats.total, \" \\u0111\\xE1nh gi\\xE1)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"pd-price\",\n          children: [product.price.toLocaleString(), \" \\u20AB\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pd-buy\",\n            onClick: buyNow,\n            disabled: product.quantityInStock === 0,\n            children: \"Mua ngay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pd-add\",\n            onClick: addToCart,\n            disabled: product.quantityInStock === 0,\n            children: \"Th\\xEAm v\\xE0o gi\\u1ECF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"pd-spec\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83E\\uDDE0 Chip: \", product.chipset]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83D\\uDD0B Pin: \", product.battery]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83D\\uDCBE RAM: \", product.ram]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83D\\uDCE6 B\\u1ED9 nh\\u1EDB: \", product.storage]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83C\\uDFA8 M\\xE0u: \", product.color]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83E\\uDD16 H\\u1EC7 \\u0111i\\u1EC1u h\\xE0nh: \", product.os]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83D\\uDCF1 M\\xE0n h\\xECnh: \", product.screenSize]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83D\\uDCF7 Camera: \", product.camera]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pd-desc\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"M\\xF4 t\\u1EA3 s\\u1EA3n ph\\u1EA9m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: product.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pd-review-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u0110\\xE1nh gi\\xE1 s\\u1EA3n ph\\u1EA9m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-rating-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-rating-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pd-rating-number\",\n            children: ratingStats.avg.toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pd-stars-big\",\n            children: renderStars(ratingStats.avg)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pd-total\",\n            children: [ratingStats.total, \" \\u0111\\xE1nh gi\\xE1\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-rating-right\",\n          children: [5, 4, 3, 2, 1].map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pd-bar\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [s, \" sao\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pd-bg\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pd-fill\",\n                style: {\n                  width: ratingStats.total ? `${ratingStats.bars[s - 1] / ratingStats.total * 100}%` : \"0%\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"pd-bar-count\",\n              children: ratingStats.bars[s - 1]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)]\n          }, s, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-filter-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-filter-stars\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pd-filter-btn \" + (starFilter === 0 ? \"active\" : \"\"),\n            onClick: () => setStarFilter(0),\n            children: \"T\\u1EA5t c\\u1EA3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), [5, 4, 3, 2, 1].map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pd-filter-btn \" + (starFilter === s ? \"active\" : \"\"),\n            onClick: () => setStarFilter(s),\n            children: [s, \" sao\"]\n          }, s, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pd-filter-btn \" + (hasCommentOnly ? \"active\" : \"\"),\n            onClick: () => setHasCommentOnly(v => !v),\n            children: \"C\\xF3 b\\xECnh lu\\u1EADn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-sort\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"S\\u1EAFp x\\u1EBFp:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: sortType,\n            onChange: e => setSortType(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"newest\",\n              children: \"M\\u1EDBi nh\\u1EA5t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"oldest\",\n              children: \"C\\u0169 nh\\u1EA5t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"highest\",\n              children: \"Sao cao\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"lowest\",\n              children: \"Sao th\\u1EA5p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-review-list\",\n        children: [filteredReviews.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"pd-no-review\",\n          children: \"Ch\\u01B0a c\\xF3 \\u0111\\xE1nh gi\\xE1 ph\\xF9 h\\u1EE3p v\\u1EDBi b\\u1ED9 l\\u1ECDc.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this), filteredReviews.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-review\",\n          style: {\n            borderBottom: '1px solid #eee',\n            padding: '20px 0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pd-review-header\",\n            style: {\n              display: 'flex',\n              gap: '15px',\n              alignItems: 'center',\n              marginBottom: '10px'\n            },\n            children: [renderAvatar(r.userName, r.userAvatar, 48), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pd-review-name\",\n                style: {\n                  fontWeight: 'bold'\n                },\n                children: r.userName || \"Ng∆∞·ªùi d√πng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pd-review-stars\",\n                children: \"‚≠ê\".repeat(r.rating || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pd-review-date\",\n                style: {\n                  fontSize: '12px',\n                  color: '#888'\n                },\n                children: (() => {\n                  if (!r.createdAt) return \"V·ª´a xong\";\n\n                  // X·ª≠ l√Ω tr∆∞·ªùng h·ª£p Backend tr·∫£ v·ªÅ m·∫£ng s·ªë [2023, 12, 22...] th∆∞·ªùng g·∫∑p ·ªü Java Instant\n                  let dateObj;\n                  if (Array.isArray(r.createdAt)) {\n                    dateObj = new Date(r.createdAt[0], r.createdAt[1] - 1, r.createdAt[2]);\n                  } else {\n                    dateObj = new Date(r.createdAt);\n                  }\n\n                  // N·∫øu dateObj h·ª£p l·ªá th√¨ hi·ªÉn th·ªã, kh√¥ng th√¨ hi·ªán m·∫∑c ƒë·ªãnh\n                  return isNaN(dateObj.getTime()) ? \"Ng√†y kh√¥ng x√°c ƒë·ªãnh\" : dateObj.toLocaleDateString(\"vi-VN\");\n                })()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 15\n          }, this), r.comment && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"pd-review-comment\",\n            children: r.comment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 29\n          }, this), r.adminReply && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pd-admin-reply\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"pd-admin-label\",\n              children: \"Ph\\u1EA3n h\\u1ED3i c\\u1EE7a shop:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: r.adminReply\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 17\n          }, this)]\n        }, r.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductDetail, \"OUVug6W3+RsYcdFqxUv7blp7bc0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useMemo","useParams","useNavigate","axios","ProfileHeader","DataContext","jsxDEV","_jsxDEV","ProductDetail","_s","_product$imageUrls","_product$imageUrls2","id","navigate","token","setToken","fetchCart","product","setProduct","user","setUser","reviews","setReviews","activeImage","setActiveImage","starFilter","setStarFilter","hasCommentOnly","setHasCommentOnly","sortType","setSortType","get","then","res","_ref","_res$data$data","_res$data","p","data","status","alert","catch","payload","list","Array","isArray","localToken","localStorage","getItem","headers","Authorization","_ref2","_res$data$data2","_res$data2","addToCart","quantityInStock","post","err","console","error","buyNow","ratingStats","total","length","avg","bars","sum","forEach","r","rt","Number","rating","filteredReviews","filter","_r$comment","comment","trim","sort","a","b","aD","Date","createdAt","bD","renderStars","repeat","Math","round","renderAvatar","name","url","size","firstLetter","charAt","toUpperCase","className","style","width","height","backgroundColor","flexShrink","borderRadius","overflow","display","alignItems","justifyContent","color","fontWeight","children","src","alt","objectFit","onError","e","target","parentElement","fileName","_jsxFileName","lineNumber","columnNumber","onLogout","removeItem","window","location","href","imageUrls","map","i","onClick","toFixed","price","toLocaleString","disabled","chipset","battery","ram","storage","os","screenSize","camera","description","s","v","value","onChange","borderBottom","padding","gap","marginBottom","userName","userAvatar","fontSize","dateObj","isNaN","getTime","toLocaleDateString","adminReply","_c","$RefreshReg$"],"sources":["C:/Aptech/Prj4_Mobile/Phone/frontend/fe/src/pages/ProductDetail.js"],"sourcesContent":["import React, { useEffect, useState, useContext, useMemo } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport \"../css/page/ProductDetail.css\";\r\nimport ProfileHeader from \"../components/page/PageHeader\";\r\nimport { DataContext } from \"../DataContext\";\r\n\r\nexport default function ProductDetail() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const { token, setToken, fetchCart } = useContext(DataContext);\r\n\r\n  const [product, setProduct] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n  const [reviews, setReviews] = useState([]);\r\n\r\n  // gallery\r\n  const [activeImage, setActiveImage] = useState(0);\r\n\r\n  // review filter\r\n  const [starFilter, setStarFilter] = useState(0);\r\n  const [hasCommentOnly, setHasCommentOnly] = useState(false);\r\n  const [sortType, setSortType] = useState(\"newest\");\r\n\r\n  /* ================= LOAD PRODUCT ================= */\r\n  useEffect(() => {\r\n    axios\r\n      .get(`http://localhost:8080/api/products/${id}`)\r\n      .then((res) => {\r\n        const p = res?.data?.data ?? res?.data ?? null;\r\n\r\n        if (!p || p.status !== \"ACTIVE\") {\r\n          alert(\"S·∫£n ph·∫©m kh√¥ng c√≤n kinh doanh!\");\r\n          navigate(\"/\");\r\n          return;\r\n        }\r\n\r\n        setProduct(p);\r\n        setActiveImage(0);\r\n      })\r\n      .catch(() => navigate(\"/\"));\r\n  }, [id, navigate]);\r\n\r\n  /* ================= LOAD REVIEWS ================= */\r\n  useEffect(() => {\r\n    axios\r\n      .get(`http://localhost:8080/api/reviews/product/${id}`)\r\n      .then((res) => {\r\n        const payload = res?.data;\r\n        let list = [];\r\n\r\n        if (Array.isArray(payload)) list = payload;\r\n        else if (Array.isArray(payload?.data)) list = payload.data;\r\n        else if (Array.isArray(payload?.reviews)) list = payload.reviews;\r\n\r\n        setReviews(list);\r\n      })\r\n      .catch(() => setReviews([]));\r\n  }, [id]);\r\n\r\n  /* ================= LOAD USER ================= */\r\n  useEffect(() => {\r\n    const localToken = localStorage.getItem(\"trip-token\");\r\n    if (!localToken) {\r\n      setUser(null);\r\n      return;\r\n    }\r\n\r\n    axios\r\n      .get(\"http://localhost:8080/api/auth/user/me\", {\r\n        headers: { Authorization: `Bearer ${localToken}` },\r\n      })\r\n      .then((res) => {\r\n        setUser(res?.data?.data ?? res?.data ?? null);\r\n      })\r\n      .catch(() => setUser(null));\r\n  }, [token]);\r\n\r\n  /* ================= CART ================= */\r\n  const addToCart = async () => {\r\n    if (!user) {\r\n      alert(\"B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m v√†o gi·ªè!\");\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    if (product.quantityInStock === 0) {\r\n      alert(\"S·∫£n ph·∫©m ƒë√£ h·∫øt h√†ng!\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await axios.post(\r\n        `http://localhost:8080/api/cart/add?productId=${id}&quantity=1`,\r\n        {},\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      \r\n      if (typeof fetchCart === 'function') {\r\n        fetchCart();\r\n      }\r\n      \r\n      alert(\"ƒê√£ th√™m v√†o gi·ªè h√†ng üõí\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Kh√¥ng th·ªÉ th√™m v√†o gi·ªè h√†ng!\");\r\n    }\r\n  };\r\n\r\n  const buyNow = () => {\r\n    addToCart();\r\n    navigate(\"/cart\");\r\n  };\r\n\r\n  /* ================= RATING STATS ================= */\r\n  const ratingStats = useMemo(() => {\r\n    const total = reviews.length;\r\n    if (total === 0)\r\n      return { avg: 0, total: 0, bars: [0, 0, 0, 0, 0] };\r\n\r\n    const bars = [0, 0, 0, 0, 0];\r\n    let sum = 0;\r\n\r\n    reviews.forEach((r) => {\r\n      const rt = Number(r.rating) || 0;\r\n      sum += rt;\r\n      if (rt >= 1 && rt <= 5) bars[rt - 1]++;\r\n    });\r\n\r\n    return { avg: sum / total, total, bars };\r\n  }, [reviews]);\r\n\r\n  /* ================= FILTER REVIEWS ================= */\r\n  const filteredReviews = useMemo(() => {\r\n    let list = [...reviews];\r\n\r\n    if (starFilter > 0)\r\n      list = list.filter((r) => Number(r.rating) === starFilter);\r\n\r\n    if (hasCommentOnly)\r\n      list = list.filter((r) => r.comment?.trim());\r\n\r\n    list.sort((a, b) => {\r\n      const aD = new Date(a.createdAt || 0);\r\n      const bD = new Date(b.createdAt || 0);\r\n      switch (sortType) {\r\n        case \"oldest\":\r\n          return aD - bD;\r\n        case \"highest\":\r\n          return b.rating - a.rating;\r\n        case \"lowest\":\r\n          return a.rating - b.rating;\r\n        default:\r\n          return bD - aD;\r\n      }\r\n    });\r\n\r\n    return list;\r\n  }, [reviews, starFilter, hasCommentOnly, sortType]);\r\n\r\n  const renderStars = (rating) =>\r\n    \"‚≠ê\".repeat(Math.round(rating || 0)) +\r\n    \"‚òÜ\".repeat(5 - Math.round(rating || 0));\r\n\r\n  /* ================= AVATAR RENDERER (D·ª±a tr√™n NewsDetailPage) ================= */\r\n  const renderAvatar = (name, url, size = 44) => {\r\n    const firstLetter = name ? name.charAt(0).toUpperCase() : \"U\";\r\n    return (\r\n      <div className=\"avatar-circle\" style={{ \r\n        width: size, \r\n        height: size, \r\n        backgroundColor: url ? 'transparent' : '#3182ce',\r\n        flexShrink: 0,\r\n        borderRadius: '50%',\r\n        overflow: 'hidden',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        color: '#fff',\r\n        fontWeight: 'bold'\r\n      }}>\r\n        {url ? (\r\n          <img \r\n            src={url} \r\n            alt={name} \r\n            style={{width: '100%', height: '100%', objectFit: 'cover'}} \r\n            onError={(e) => { \r\n              e.target.src = \"\"; \r\n              e.target.parentElement.style.backgroundColor = \"#3182ce\"; \r\n            }} \r\n          />\r\n        ) : (\r\n          <span>{firstLetter}</span>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (!product)\r\n    return (\r\n      <div className=\"loading\">\r\n        <div className=\"spinner-border text-danger\"></div>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"pd-container\">\r\n      <ProfileHeader\r\n        user={user}\r\n        onLogout={() => {\r\n          localStorage.removeItem(\"trip-token\");\r\n          setToken(null);\r\n          setUser(null);\r\n          window.location.href = \"/\";\r\n        }}\r\n      />\r\n\r\n      {/* ================= PRODUCT DETAILS ================= */}\r\n      <div className=\"pd-content\">\r\n        <div className=\"pd-left\">\r\n          <div className=\"pd-main-image\">\r\n            {product.quantityInStock === 0 && (\r\n              <div className=\"pd-out-stock\">H·∫æT H√ÄNG</div>\r\n            )}\r\n            <img\r\n              src={product.imageUrls?.[activeImage]}\r\n              alt={product.name}\r\n            />\r\n          </div>\r\n          <div className=\"pd-thumb-list\">\r\n            {product.imageUrls?.map((url, i) => (\r\n              <img\r\n                key={i}\r\n                src={url}\r\n                alt={`thumb-${i}`}\r\n                className={i === activeImage ? \"active\" : \"\"}\r\n                onClick={() => setActiveImage(i)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pd-right\">\r\n          <h2 className=\"pd-name\">{product.name}</h2>\r\n          <div className=\"pd-rating-line\">\r\n            <span className=\"pd-rating-score\">{ratingStats.avg.toFixed(1)}</span>\r\n            <span className=\"pd-rating-stars\">{renderStars(ratingStats.avg)}</span>\r\n            <span className=\"pd-rating-count\">({ratingStats.total} ƒë√°nh gi√°)</span>\r\n          </div>\r\n          <span className=\"pd-price\">{product.price.toLocaleString()} ‚Ç´</span>\r\n          <div className=\"pd-actions\">\r\n            <button className=\"pd-buy\" onClick={buyNow} disabled={product.quantityInStock === 0}>Mua ngay</button>\r\n            <button className=\"pd-add\" onClick={addToCart} disabled={product.quantityInStock === 0}>Th√™m v√†o gi·ªè</button>\r\n          </div>\r\n          <ul className=\"pd-spec\">\r\n            <li>üß† Chip: {product.chipset}</li>\r\n            <li>üîã Pin: {product.battery}</li>\r\n            <li>üíæ RAM: {product.ram}</li>\r\n            <li>üì¶ B·ªô nh·ªõ: {product.storage}</li>\r\n            <li>üé® M√†u: {product.color}</li>\r\n            <li>ü§ñ H·ªá ƒëi·ªÅu h√†nh: {product.os}</li>\r\n            <li>üì± M√†n h√¨nh: {product.screenSize}</li>\r\n            <li>üì∑ Camera: {product.camera}</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"pd-desc\">\r\n        <h3>M√¥ t·∫£ s·∫£n ph·∫©m</h3>\r\n        <p>{product.description}</p>\r\n      </div>\r\n\r\n      {/* ================= REVIEW SECTION ================= */}\r\n      <div className=\"pd-review-section\">\r\n        <h3>ƒê√°nh gi√° s·∫£n ph·∫©m</h3>\r\n\r\n        {/* Rating Summary Box */}\r\n        <div className=\"pd-rating-box\">\r\n          <div className=\"pd-rating-left\">\r\n            <div className=\"pd-rating-number\">{ratingStats.avg.toFixed(1)}</div>\r\n            <div className=\"pd-stars-big\">{renderStars(ratingStats.avg)}</div>\r\n            <div className=\"pd-total\">{ratingStats.total} ƒë√°nh gi√°</div>\r\n          </div>\r\n          <div className=\"pd-rating-right\">\r\n            {[5,4,3,2,1].map((s) => (\r\n              <div key={s} className=\"pd-bar\">\r\n                <span>{s} sao</span>\r\n                <div className=\"pd-bg\">\r\n                  <div className=\"pd-fill\" style={{ width: ratingStats.total ? `${(ratingStats.bars[s-1]/ratingStats.total)*100}%` : \"0%\" }}></div>\r\n                </div>\r\n                <span className=\"pd-bar-count\">{ratingStats.bars[s-1]}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filter Controls */}\r\n        <div className=\"pd-filter-row\">\r\n          <div className=\"pd-filter-stars\">\r\n            <button className={\"pd-filter-btn \" + (starFilter === 0 ? \"active\" : \"\")} onClick={() => setStarFilter(0)}>T·∫•t c·∫£</button>\r\n            {[5,4,3,2,1].map((s) => (\r\n              <button key={s} className={\"pd-filter-btn \" + (starFilter === s ? \"active\" : \"\")} onClick={() => setStarFilter(s)}>{s} sao</button>\r\n            ))}\r\n            <button className={\"pd-filter-btn \" + (hasCommentOnly ? \"active\" : \"\")} onClick={() => setHasCommentOnly((v) => !v)}>C√≥ b√¨nh lu·∫≠n</button>\r\n          </div>\r\n          <div className=\"pd-sort\">\r\n            <span>S·∫Øp x·∫øp:</span>\r\n            <select value={sortType} onChange={(e) => setSortType(e.target.value)}>\r\n              <option value=\"newest\">M·ªõi nh·∫•t</option>\r\n              <option value=\"oldest\">C≈© nh·∫•t</option>\r\n              <option value=\"highest\">Sao cao</option>\r\n              <option value=\"lowest\">Sao th·∫•p</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Review List - FIXED HERE */}\r\n        <div className=\"pd-review-list\">\r\n          {filteredReviews.length === 0 && (\r\n            <p className=\"pd-no-review\">Ch∆∞a c√≥ ƒë√°nh gi√° ph√π h·ª£p v·ªõi b·ªô l·ªçc.</p>\r\n          )}\r\n\r\n          {filteredReviews.map((r) => (\r\n            <div key={r.id} className=\"pd-review\" style={{ borderBottom: '1px solid #eee', padding: '20px 0' }}>\r\n              <div className=\"pd-review-header\" style={{ display: 'flex', gap: '15px', alignItems: 'center', marginBottom: '10px' }}>\r\n      \r\n                {/* S·ª¨A T·∫†I ƒê√ÇY: Truy·ªÅn r.userAvatar thay v√¨ r.user?.avatar */}\r\n                {renderAvatar(r.userName, r.userAvatar, 48)}\r\n                \r\n                <div>\r\n                  <div className=\"pd-review-name\" style={{ fontWeight: 'bold' }}>\r\n                    {r.userName || \"Ng∆∞·ªùi d√πng\"}\r\n                  </div>\r\n                  <div className=\"pd-review-stars\">\r\n                    {\"‚≠ê\".repeat(r.rating || 0)}\r\n                  </div>\r\n                  <div className=\"pd-review-date\" style={{ fontSize: '12px', color: '#888' }}>\r\n                  {(() => {\r\n                    if (!r.createdAt) return \"V·ª´a xong\";\r\n                    \r\n                    // X·ª≠ l√Ω tr∆∞·ªùng h·ª£p Backend tr·∫£ v·ªÅ m·∫£ng s·ªë [2023, 12, 22...] th∆∞·ªùng g·∫∑p ·ªü Java Instant\r\n                    let dateObj;\r\n                    if (Array.isArray(r.createdAt)) {\r\n                      dateObj = new Date(r.createdAt[0], r.createdAt[1] - 1, r.createdAt[2]);\r\n                    } else {\r\n                      dateObj = new Date(r.createdAt);\r\n                    }\r\n\r\n                    // N·∫øu dateObj h·ª£p l·ªá th√¨ hi·ªÉn th·ªã, kh√¥ng th√¨ hi·ªán m·∫∑c ƒë·ªãnh\r\n                    return isNaN(dateObj.getTime()) \r\n                      ? \"Ng√†y kh√¥ng x√°c ƒë·ªãnh\" \r\n                      : dateObj.toLocaleDateString(\"vi-VN\");\r\n                  })()}\r\n                </div>\r\n                </div>\r\n              </div>\r\n\r\n              {r.comment && <p className=\"pd-review-comment\">{r.comment}</p>}\r\n\r\n              {r.adminReply && (\r\n                <div className=\"pd-admin-reply\">\r\n                  <span className=\"pd-admin-label\">Ph·∫£n h·ªìi c·ªßa shop:</span>\r\n                  <p>{r.adminReply}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}